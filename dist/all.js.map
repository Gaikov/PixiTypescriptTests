{"version":3,"sources":["log/Logger.ts","base/utils/time/EnterFrameManager.ts","base/BaseWebApplication.ts","tests/Test000.ts","base/utils/UMath.ts","base/debug/FPSMeter.ts","tests/utils/TestUtils.ts","tests/Test001.ts","base/utils/time/actions/IAction.ts","base/utils/time/actions/BaseActionsQueue.ts","base/utils/time/IFrameListener.ts","base/utils/time/actions/ActionsQueue.ts","base/utils/time/actions/BaseDeferredAction.ts","base/utils/time/actions/DeferredDelegateAction.ts","tests/Test002.ts","tests/Test003.ts","Main.ts"],"names":[],"mappings":"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","file":"all.js","sourcesContent":["/**\r\n * Created by roman.gaikov on 6/15/2016.\r\n */\r\n\r\n\r\nclass Logger\r\n{\r\n    public static info(...args):void\r\n    {\r\n        console.log(args.join(\" \"));\r\n    }\r\n}\r\n","/**\r\n * Created by roman.gaikov on 6/29/2016.\r\n */\r\n\r\nclass EnterFrameManager {\r\n    private static _instance:EnterFrameManager;\r\n\r\n    private _listeners:Array<IFrameListener> = [];\r\n\r\n    public static instance():EnterFrameManager {\r\n        if (EnterFrameManager._instance == null) {\r\n            EnterFrameManager._instance = new EnterFrameManager();\r\n        }\r\n        return EnterFrameManager._instance;\r\n    }\r\n\r\n    public addListener(l:IFrameListener):void {\r\n        this._listeners.push(l);\r\n    }\r\n\r\n    public removeListener(l:IFrameListener):void {\r\n        var index = this._listeners.indexOf(l);\r\n        if (index >= 0) {\r\n            this._listeners.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    public onEnterFrame(deltaTime:number):void {\r\n        //Logger.info(this + \"enter frame\");\r\n        for (var l of this._listeners) {\r\n            l.onEnterFrame(deltaTime);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n","///<reference path=\"../definitions/pixi.js.d.ts\"/>\r\n///<reference path=\"utils/time/EnterFrameManager.ts\"/>\r\n/**\r\n * Created by roman.gaikov on 6/27/2016.\r\n */\r\n\r\n\r\nclass BaseWebGameApplication {\r\n    //static private inline var NUM_SMOOTH_TIMES:Int = 10;\r\n    //private var _smoothTime:Array<Float> = [];\r\n\r\n    private _renderer:PIXI.SystemRenderer;\r\n    private _prevTime:number = 0;\r\n    private _stage:PIXI.Container = new PIXI.Container();\r\n\r\n    public constructor() {\r\n        //new Perf();\r\n\r\n        //Logger.addLoggerItem(new LoggerTracePolicy());\r\n\r\n        this._renderer = PIXI.autoDetectRenderer(\r\n            window.innerWidth,\r\n            window.innerHeight,\r\n            this.prepareRenderOptions());\r\n\r\n        document.body.appendChild(this._renderer.view);\r\n        window.requestAnimationFrame(this.loop.bind(this));\r\n\r\n        var self = this;\r\n        window.addEventListener(\"resize\", function ():void\r\n        {\r\n            var w = window.innerWidth;\r\n            var h = window.innerHeight;\r\n            Logger.info(`resize ${w}x${h}`);\r\n            self._renderer.resize(window.innerWidth, window.innerHeight);\r\n        });\r\n    }\r\n\r\n    protected prepareRenderOptions():PIXI.RendererOptions {\r\n        var opts:PIXI.RendererOptions = {};\r\n        opts.backgroundColor = 0x99eeff;\r\n        opts.autoResize = true;\r\n\r\n        return opts;\r\n    }\r\n\r\n    public get renderer():PIXI.SystemRenderer {\r\n        return this._renderer;\r\n    }\r\n\r\n\r\n    public get stage():PIXI.Container {\r\n        return this._stage;\r\n    }\r\n\r\n\r\n    protected animate(deltaTime:number):void {\r\n\r\n    }\r\n\r\n    private loop(currentTime:number):void {\r\n        window.requestAnimationFrame(this.loop.bind(this));\r\n        var deltaTime:number = (currentTime - this._prevTime) / 1000;\r\n        this._prevTime = currentTime;\r\n\r\n        /*\t\t_smoothTime.push(deltaTime);\r\n         if (_smoothTime.length > NUM_SMOOTH_TIMES)\r\n         {\r\n         _smoothTime.shift();\r\n         }\r\n         deltaTime = 0;\r\n         for (t in _smoothTime)\r\n         {\r\n         deltaTime += t;\r\n         }\r\n         deltaTime /= _smoothTime.length;*/\r\n\r\n\r\n        //SimpleActuator.stage_onEnterFrame();\r\n\r\n        EnterFrameManager.instance().onEnterFrame(deltaTime);\r\n        this.animate(deltaTime);\r\n\r\n        this.renderer.render(this.stage);\r\n    }\r\n}\r\n\r\n\r\n\r\n","///<reference path=\"../base/BaseWebApplication.ts\"/>\r\n///<reference path=\"../log/Logger.ts\"/>\r\n/**\r\n * Created by roman.gaikov on 6/27/2016.\r\n */\r\n\r\nclass Test000 extends BaseWebGameApplication\r\n{\r\n    constructor() {\r\n        super();\r\n        Logger.info(\"init\");\r\n\r\n        var tf = new PIXI.Text(\"some text 1\");\r\n        tf.x = 100;\r\n        tf.y = 100;\r\n\r\n        this.stage.addChild(tf);\r\n    }\r\n\r\n\r\n}\r\n","/**\r\n * Created by roman.gaikov on 6/28/2016.\r\n */\r\n\r\nclass UMath\r\n{\r\n    public static rad(degrees:number):number\r\n    {\r\n        return degrees * Math.PI / 180;\r\n    }\r\n}\r\n","///<reference path=\"../../definitions/pixi.js.d.ts\"/>\r\n/**\r\n * Created by roman.gaikov on 6/29/2016.\r\n */\r\n\r\nclass FPSMeter extends PIXI.Container implements IFrameListener {\r\n    private _field:PIXI.Text;\r\n    private _framesCount:number = 0;\r\n    private _totalTime:number = 0;\r\n\r\n    constructor() {\r\n        super();\r\n        this._field = new PIXI.Text(\"fps\", {font: \"12px Arial\"});\r\n        this.addChild(this._field);\r\n\r\n        EnterFrameManager.instance().addListener(this);\r\n    }\r\n\r\n    onEnterFrame(deltaTime:number):void {\r\n        this._framesCount++;\r\n        this._totalTime += deltaTime;\r\n        if (this._framesCount >= 10) {\r\n            var fps = this._framesCount / this._totalTime;\r\n            this._field.text = `${fps.toFixed(2)} fps`;\r\n            this._framesCount = 0;\r\n            this._totalTime = 0;\r\n        }\r\n    }\r\n}\r\n","/**\r\n * Created by roman.gaikov on 6/29/2016.\r\n */\r\n\r\nclass TestUtils\r\n{\r\n    public static createSquare(size:number, color?:number):PIXI.Graphics\r\n    {\r\n        //Logger.info(\"color\", color);\r\n\r\n        var res = new PIXI.Graphics();\r\n        res.beginFill(color);\r\n        res.drawRect(-size/2, -size/2, size, size);\r\n\r\n        return res;\r\n    }\r\n}\r\n","///<reference path=\"../base/BaseWebApplication.ts\"/>\r\n///<reference path=\"../definitions/pixi.js.d.ts\"/>\r\n///<reference path=\"../base/utils/UMath.ts\"/>\r\n///<reference path=\"../base/debug/FPSMeter.ts\"/>\r\n///<reference path=\"utils/TestUtils.ts\"/>\r\n/**\r\n * Created by roman.gaikov on 6/28/2016.\r\n */\r\n\r\nclass Test001 extends BaseWebGameApplication\r\n{\r\n    private _graphics:PIXI.Graphics;\r\n    private _angle:number = 0;\r\n    private _pos:PIXI.Point = new PIXI.Point(200, 200);\r\n\r\n    constructor() {\r\n        super();\r\n        \r\n        this._graphics = TestUtils.createSquare(100, 0xaaffff);\r\n\r\n        this._graphics.x = 100;\r\n        this._graphics.y = 100;\r\n\r\n        this.stage.addChild(this._graphics);\r\n        //this.stage.addChild(new FPSMeter());\r\n    }\r\n\r\n    protected animate(deltaTime:number):void\r\n    {\r\n        this._graphics.rotation += UMath.rad(deltaTime * -360);\r\n        this._angle += UMath.rad(180) * deltaTime;\r\n\r\n        this._graphics.x = this._pos.x + Math.cos(this._angle) * 100;\r\n        this._graphics.y = this._pos.y + Math.sin(this._angle) * 200;\r\n    }\r\n}\r\n","/**\r\n * Created by roman.gaikov on 6/29/2016.\r\n */\r\n\r\ninterface IAction\r\n{\r\n    getActive():boolean;\r\n    onStart():void;\r\n    onStopped(cancelled:boolean):void;\r\n    frameStep(deltaTime:number):void;\r\n}\r\n\r\n\r\n","///<reference path=\"IAction.ts\"/>\r\n/**\r\n * Created by roman.gaikov on 6/29/2016.\r\n */\r\n\r\nclass BaseActionsQueue {\r\n    private _queue:Array<IAction> = [];\r\n    private _current:IAction;\r\n\r\n    constructor() {\r\n    }\r\n\r\n    public addAction(action:IAction):void {\r\n        this._queue.push(action);\r\n    }\r\n\r\n    public start():boolean {\r\n        return (this._current == null && this.nextAction());\r\n    }\r\n\r\n    public stop():void {\r\n        if (this._current != null) {\r\n            this._current.onStopped(true);\r\n            this._current = null;\r\n        }\r\n\r\n        for (var action of this._queue) {\r\n            action.onStopped(true);\r\n        }\r\n        this._queue.splice(0, this._queue.length);\r\n    }\r\n\r\n    public isActive():boolean {\r\n        return (this._current != null && this._current.getActive()) || this._queue.length > 0;\r\n    }\r\n\r\n    public findAction(matchFunc:(IAction) => boolean):IAction {\r\n        if (matchFunc(this._current)) {\r\n            return this._current;\r\n        }\r\n\r\n        for (var a of this._queue) {\r\n            if (matchFunc(a)) {\r\n                return a;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public update(deltaTime:number):void {\r\n        if (this._current != null) {\r\n            if (!this._current.getActive()) {\r\n                if (!this.nextAction()) {\r\n                    this.stop();\r\n                }\r\n            }\r\n\r\n            if (this._current != null) {\r\n                this._current.frameStep(deltaTime);\r\n            }\r\n        }\r\n    }\r\n\r\n    private nextAction():boolean {\r\n        if (this._current != null) {\r\n            this._current.onStopped(false);\r\n        }\r\n\r\n        this._current = this._queue.shift();\r\n        if (this._current != null) {\r\n            this._current.onStart();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n}\r\n\r\n\r\n","/**\r\n * Created by roman.gaikov on 6/29/2016.\r\n */\r\n\r\ninterface IFrameListener\r\n{\r\n    onEnterFrame(deltaTime:number):void;\r\n}\r\n","///<reference path=\"BaseActionsQueue.ts\"/>\r\n///<reference path=\"../IFrameListener.ts\"/>\r\n/**\r\n * Created by roman.gaikov on 6/29/2016.\r\n */\r\n\r\nclass ActionsQueue extends BaseActionsQueue implements IFrameListener {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    public start():boolean {\r\n        if (super.start()) {\r\n            EnterFrameManager.instance().addListener(this);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public stop():void {\r\n        super.stop();\r\n        EnterFrameManager.instance().removeListener(this);\r\n    }\r\n\r\n    public onEnterFrame(deltaTime:number):void {\r\n        this.update(deltaTime);\r\n    }\r\n}\r\n\r\n","/**\r\n * Created by roman.gaikov on 6/29/2016.\r\n */\r\n\r\nclass BaseDeferredAction implements IAction {\r\n    private _timeLeft:number;\r\n\r\n    constructor(timeLeft:number) {\r\n        this._timeLeft = timeLeft;\r\n    }\r\n\r\n    public getActive():boolean {\r\n        return this._timeLeft >= 0;\r\n    }\r\n\r\n    public onStart():void {\r\n    }\r\n\r\n    public onStopped(cancelled:boolean):void {\r\n    }\r\n\r\n    public frameStep(deltaTime:number):void {\r\n        this._timeLeft -= deltaTime;\r\n        if (this._timeLeft <= 0) {\r\n            this.doAction();\r\n        }\r\n    }\r\n\r\n    protected doAction():void {\r\n\r\n    }\r\n}\r\n\r\n\r\n","///<reference path=\"BaseDeferredAction.ts\"/>\r\n/**\r\n * Created by roman.gaikov on 6/29/2016.\r\n */\r\n\r\nclass DeferredDelegateAction extends BaseDeferredAction\r\n{\r\n    private _delegate:()=>void;\r\n    \r\n    constructor(timeLeft:number, delegate:()=>void) {\r\n        super(timeLeft);\r\n        this._delegate = delegate;\r\n    }\r\n\r\n    protected doAction():void \r\n    {\r\n        super.doAction();\r\n        this._delegate();\r\n    }\r\n}\r\n","///<reference path=\"../base/utils/time/actions/ActionsQueue.ts\"/>\r\n///<reference path=\"../base/utils/time/actions/DeferredDelegateAction.ts\"/>\r\n///<reference path=\"../base/BaseWebApplication.ts\"/>\r\n/**\r\n * Created by roman.gaikov on 6/29/2016.\r\n */\r\n\r\nclass Test002 extends BaseWebGameApplication\r\n{\r\n    private _message:string = \"Test002\";\r\n\r\n    constructor() {\r\n        super();\r\n        var queue = new ActionsQueue();\r\n\r\n        for (let i = 0; i < 10; i++) {\r\n            queue.addAction(new DeferredDelegateAction(0.5, ()=> this.createItem()));\r\n        }\r\n\r\n        queue.start();\r\n    }\r\n\r\n    private createItem():void {\r\n        Logger.info(\"message: \", this._message);\r\n        var item = TestUtils.createSquare(100, 0xaaaaff);\r\n        item.x = Math.random() * window.innerWidth;\r\n        item.y = Math.random() * window.innerHeight;\r\n        this.stage.addChild(item);\r\n    }\r\n}\r\n","/**\r\n * Created by roman.gaikov on 10/25/2016.\r\n */\r\n\r\nclass Test003 extends BaseWebGameApplication\r\n{\r\n\tconstructor()\r\n\t{\r\n\t\tsuper();\r\n\r\n\t\tLogger.info(\"test003\");\r\n\r\n\t\tlet g = new PIXI.Graphics();\r\n\t\tg.beginFill(0xff0000, 1);\r\n\t\tg.drawRect(0, 0, 100, 100);\r\n\r\n\t\tthis.stage.addChild(g);\r\n\t}\r\n}\r\n","///<reference path=\"log/Logger.ts\"/>\r\n///<reference path=\"tests/Test000.ts\"/>\r\n///<reference path=\"tests/Test001.ts\"/>\r\n///<reference path=\"tests/Test002.ts\"/>\r\n///<reference path=\"tests/Test003.ts\"/>\r\n/**\r\n * Created by roman.gaikov on 6/15/2016.\r\n */\r\n\r\nclass Application\r\n{\r\n    public static run()\r\n    {\r\n        Logger.info(\"starting\");\r\n        //new Test000();\r\n        //new Test001();\r\n        //new Test002();\r\n        new Test003();\r\n    }\r\n}\r\n\r\n(\r\n    Application.run()\r\n);\r\n"],"sourceRoot":"../src"}