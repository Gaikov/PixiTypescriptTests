{"version":3,"sources":["log/Logger.ts","base/utils/time/EnterFrameManager.ts","base/BaseWebApplication.ts","tests/Test000.ts","base/utils/UMath.ts","base/debug/FPSMeter.ts","tests/Test001.ts","Main.ts","TestClass.ts","base/utils/time/IFrameListener.ts"],"names":[],"mappings":"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","file":"all.js","sourcesContent":["/**\r\n * Created by roman.gaikov on 6/15/2016.\r\n */\r\n\r\n\r\nclass Logger\r\n{\r\n    public static info(...args):void\r\n    {\r\n        console.log(args.join(\" \"));\r\n    }\r\n}\r\n","/**\r\n * Created by roman.gaikov on 6/29/2016.\r\n */\r\n\r\nclass EnterFrameManager {\r\n    private static _instance:EnterFrameManager;\r\n\r\n    private _listeners:Array<IFrameListener> = [];\r\n\r\n    public static instance():EnterFrameManager {\r\n        if (EnterFrameManager._instance == null) {\r\n            EnterFrameManager._instance = new EnterFrameManager();\r\n        }\r\n        return EnterFrameManager._instance;\r\n    }\r\n\r\n    public addListener(l:IFrameListener):void {\r\n        this._listeners.push(l);\r\n    }\r\n\r\n    public removeListener(l:IFrameListener):void {\r\n        var index = this._listeners.indexOf(l);\r\n        if (index >= 0) {\r\n            this._listeners.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    public onEnterFrame(deltaTime:number):void {\r\n        //Logger.info(this + \"enter frame\");\r\n        for (var l of this._listeners) {\r\n            l.onEnterFrame(deltaTime);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n","///<reference path=\"../definitions/pixi.js.d.ts\"/>\r\n///<reference path=\"utils/time/EnterFrameManager.ts\"/>\r\n/**\r\n * Created by roman.gaikov on 6/27/2016.\r\n */\r\n\r\n\r\nclass BaseWebGameApplication {\r\n    //static private inline var NUM_SMOOTH_TIMES:Int = 10;\r\n    //private var _smoothTime:Array<Float> = [];\r\n\r\n    private _renderer:PIXI.SystemRenderer;\r\n    private _prevTime:number = 0;\r\n    private _stage:PIXI.Container = new PIXI.Container();\r\n\r\n    public constructor() {\r\n        //new Perf();\r\n\r\n        //Logger.addLoggerItem(new LoggerTracePolicy());\r\n\r\n        this._renderer = PIXI.autoDetectRenderer(\r\n            window.innerWidth,\r\n            window.innerHeight,\r\n            this.prepareRenderOptions());\r\n\r\n        document.body.appendChild(this._renderer.view);\r\n        window.requestAnimationFrame(this.loop.bind(this));\r\n\r\n        var self = this;\r\n        window.addEventListener(\"resize\", function ():void\r\n        {\r\n            var w = window.innerWidth;\r\n            var h = window.innerHeight;\r\n            Logger.info(`resize ${w}x${h}`);\r\n            self._renderer.resize(window.innerWidth, window.innerHeight);\r\n        });\r\n    }\r\n\r\n    protected prepareRenderOptions():PIXI.RendererOptions {\r\n        var opts:PIXI.RendererOptions = {};\r\n        opts.backgroundColor = 0x99eeff;\r\n        opts.autoResize = true;\r\n\r\n        return opts;\r\n    }\r\n\r\n    public get renderer():PIXI.SystemRenderer {\r\n        return this._renderer;\r\n    }\r\n\r\n\r\n    public get stage():PIXI.Container {\r\n        return this._stage;\r\n    }\r\n\r\n\r\n    protected animate(deltaTime:number):void {\r\n\r\n    }\r\n\r\n    private loop(currentTime:number):void {\r\n        window.requestAnimationFrame(this.loop.bind(this));\r\n        var deltaTime:number = (currentTime - this._prevTime) / 1000;\r\n        this._prevTime = currentTime;\r\n\r\n        /*\t\t_smoothTime.push(deltaTime);\r\n         if (_smoothTime.length > NUM_SMOOTH_TIMES)\r\n         {\r\n         _smoothTime.shift();\r\n         }\r\n         deltaTime = 0;\r\n         for (t in _smoothTime)\r\n         {\r\n         deltaTime += t;\r\n         }\r\n         deltaTime /= _smoothTime.length;*/\r\n\r\n\r\n        //SimpleActuator.stage_onEnterFrame();\r\n\r\n        EnterFrameManager.instance().onEnterFrame(deltaTime);\r\n        this.animate(deltaTime);\r\n\r\n        this.renderer.render(this.stage);\r\n    }\r\n}\r\n\r\n\r\n\r\n","///<reference path=\"../base/BaseWebApplication.ts\"/>\r\n///<reference path=\"../log/Logger.ts\"/>\r\n/**\r\n * Created by roman.gaikov on 6/27/2016.\r\n */\r\n\r\nclass Test000 extends BaseWebGameApplication\r\n{\r\n    constructor() {\r\n        super();\r\n        Logger.info(\"init\");\r\n\r\n        var tf = new PIXI.Text(\"some text\");\r\n        tf.x = 100;\r\n        tf.y = 100;\r\n\r\n        this.stage.addChild(tf);\r\n    }\r\n\r\n\r\n}\r\n","/**\r\n * Created by roman.gaikov on 6/28/2016.\r\n */\r\n\r\nclass UMath\r\n{\r\n    public static rad(degrees:number):number\r\n    {\r\n        return degrees * Math.PI / 180;\r\n    }\r\n}\r\n","///<reference path=\"../../definitions/pixi.js.d.ts\"/>\r\n/**\r\n * Created by roman.gaikov on 6/29/2016.\r\n */\r\n\r\nclass FPSMeter extends PIXI.Container implements IFrameListener\r\n{\r\n    private _field:PIXI.Text;\r\n    private _framesCount:number = 0;\r\n    private _totalTime:number = 0;\r\n\r\n    constructor() \r\n    {\r\n        super();\r\n        this._field = new PIXI.Text(\"fps\", {font:\"12px Arial\"});\r\n        this.addChild(this._field);\r\n\r\n        EnterFrameManager.instance().addListener(this);\r\n    }\r\n\r\n    onEnterFrame(deltaTime:number):void\r\n    {\r\n        this._framesCount ++;\r\n        this._totalTime += deltaTime;\r\n        if (this._framesCount >= 10)\r\n        {\r\n            var fps = this._framesCount / this._totalTime;\r\n            this._field.text = `${fps.toFixed(2)} fps`;\r\n            this._framesCount = 0;\r\n            this._totalTime = 0;\r\n        }\r\n    }\r\n}\r\n","///<reference path=\"../base/BaseWebApplication.ts\"/>\r\n///<reference path=\"../definitions/pixi.js.d.ts\"/>\r\n///<reference path=\"../base/utils/UMath.ts\"/>\r\n///<reference path=\"../base/debug/FPSMeter.ts\"/>\r\n/**\r\n * Created by roman.gaikov on 6/28/2016.\r\n */\r\n\r\nclass Test001 extends BaseWebGameApplication\r\n{\r\n    private _graphics:PIXI.Graphics;\r\n    private _angle:number = 0;\r\n    private _pos:PIXI.Point = new PIXI.Point(200, 200);\r\n\r\n    constructor() {\r\n        super();\r\n        \r\n\r\n\r\n        this._graphics = new PIXI.Graphics();\r\n        this._graphics.beginFill(0xffaaaa);\r\n        this._graphics.drawRect(-50, -50, 100, 100);\r\n\r\n        this._graphics.x = 100;\r\n        this._graphics.y = 100;\r\n\r\n        this.stage.addChild(this._graphics);\r\n        this.stage.addChild(new FPSMeter());\r\n    }\r\n\r\n    protected animate(deltaTime:number):void\r\n    {\r\n        this._graphics.rotation += UMath.rad(deltaTime * 90);\r\n        this._angle += UMath.rad(180) * deltaTime;\r\n\r\n        this._graphics.x = this._pos.x + Math.cos(this._angle) * 200;\r\n        this._graphics.y = this._pos.y + Math.sin(this._angle) * 100;\r\n\r\n    }\r\n}\r\n","///<reference path=\"log/Logger.ts\"/>\r\n///<reference path=\"tests/Test000.ts\"/>\r\n///<reference path=\"tests/Test001.ts\"/>\r\n/**\r\n * Created by roman.gaikov on 6/15/2016.\r\n */\r\n\r\nclass Application\r\n{\r\n    public static run()\r\n    {\r\n        Logger.info(\"starting\");\r\n        //new Test000();\r\n        new Test001();  \r\n    }\r\n}\r\n\r\n(\r\n    Application.run()\r\n);\r\n","///<reference path=\"log/Logger.ts\"/>\r\n/**\r\n * Created by roman.gaikov on 6/15/2016.\r\n */\r\n\r\nclass TestClass\r\n{\r\n    public static log(message:String):void\r\n    {\r\n        Logger.info(\"Message from test: \", message);\r\n    }\r\n}\r\n","/**\r\n * Created by roman.gaikov on 6/29/2016.\r\n */\r\n\r\ninterface IFrameListener\r\n{\r\n    onEnterFrame(deltaTime:number):void;\r\n}\r\n"],"sourceRoot":"../src"}